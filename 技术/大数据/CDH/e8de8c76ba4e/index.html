<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/heart.svg" color="#222">
  <meta name="google-site-verification" content="G1zxL8_uEau107sKvFuMkecN7hNlJeQdhTqIaBuwQOI">
  <meta name="msvalidate.01" content="G1zxL8_uEau107sKvFuMkecN7hNlJeQdhTqIaBuwQOI">
  <meta name="baidu-site-verification" content="thkJPSuv5DFAoiiq">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic%7Cglyph-correction:300,300italic,400,400italic,700,700italic%7C"Cinzel+Decorative":300,300italic,400,400italic,700,700italic%7CAmstelvar:300,300italic,400,400italic,700,700italic%7C"Noto+Serif+SC":300,300italic,400,400italic,700,700italic%7C"JetBrains+Mono":300,300italic,400,400italic,700,700italic%7C"Source+Code+Pro":300,300italic,400,400italic,700,700italic%7Cserif:300,300italic,400,400italic,700,700italic%7CHanziPenSC-W5:300,300italic,400,400italic,700,700italic%7CJetBrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css" integrity="sha256-no0c5ccDODBwp+9hSmV5VvPpKwHCpbVzXHexIkupM6U=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js" integrity="sha256-a5YRB27CcBwBFcT5EF/f3E4vzIqyHrSR878nseNYw64=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;alessa0.cn&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:true,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:true,&quot;lazyload&quot;:true,&quot;pangu&quot;:true,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:&quot;gitalk&quot;,&quot;storage&quot;:true,&quot;lazyload&quot;:true,&quot;nav&quot;:null,&quot;activeClass&quot;:&quot;gitalk&quot;},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:true,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:5,&quot;unescape&quot;:false,&quot;preload&quot;:true}}</script><script src="/js/config.js"></script>
<meta name="description" content="CDH 环境配置">
<meta property="og:type" content="article">
<meta property="og:title" content="傻瓜式 CDH 集群部署指南">
<meta property="og:url" content="https://alessa0.cn/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/e8de8c76ba4e/">
<meta property="og:site_name" content="听泉.ღ">
<meta property="og:description" content="CDH 环境配置">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://image.alessa0.cn/074403.jpg">
<meta property="article:published_time" content="2019-05-17T06:40:59.000Z">
<meta property="article:modified_time" content="2021-06-18T00:42:38.942Z">
<meta property="article:author" content="XIE QING">
<meta property="article:tag" content="BigData">
<meta property="article:tag" content="CDH环境搭建">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://image.alessa0.cn/074403.jpg">


<link rel="canonical" href="https://alessa0.cn/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/e8de8c76ba4e/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;alessa0.cn&#x2F;%E6%8A%80%E6%9C%AF&#x2F;%E5%A4%A7%E6%95%B0%E6%8D%AE&#x2F;CDH&#x2F;e8de8c76ba4e&#x2F;&quot;,&quot;path&quot;:&quot;技术&#x2F;大数据&#x2F;CDH&#x2F;e8de8c76ba4e&#x2F;&quot;,&quot;title&quot;:&quot;傻瓜式 CDH 集群部署指南&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>傻瓜式 CDH 集群部署指南 | 听泉.ღ</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125031312-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{&quot;tracking_id&quot;:&quot;UA-125031312-1&quot;,&quot;only_pageview&quot;:false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?e3a5e194c5c7cb7bbd97a2d5f0f44f33"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">听泉.ღ</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">— 听泉小窝 —</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">集群环境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.1.</span> <span class="nav-text">系统</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8A%E4%BF%AE%E6%94%B9hosts"><span class="nav-number">2.</span> <span class="nav-text">关闭防火墙及修改 hosts</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B0%B8%E4%B9%85%E5%85%B3%E9%97%AD%E5%86%85%E6%A0%B8%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-number">2.1.</span> <span class="nav-text">永久关闭内核防火墙</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E7%B3%BB%E7%BB%9F%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-number">2.2.</span> <span class="nav-text">关闭系统防火墙</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2firewall"><span class="nav-number">2.2.1.</span> <span class="nav-text">停止 firewall</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A6%81%E6%AD%A2firewall%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="nav-number">2.2.2.</span> <span class="nav-text">禁止 firewall 开机启动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9hosts%E6%96%87%E4%BB%B6"><span class="nav-number">2.3.</span> <span class="nav-text">修改 hosts 文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ssh%E4%BA%92%E4%BF%A1"><span class="nav-number">3.</span> <span class="nav-text">SSH 互信</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5%E5%AF%B9%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5"><span class="nav-number">3.1.</span> <span class="nav-text">生成密钥对（公钥和私钥）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%BD%E5%8A%A0authorized_keys"><span class="nav-number">3.2.</span> <span class="nav-text">追加 authorized_keys</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%BD%E5%8A%A0%E5%AF%86%E9%92%A5%E5%88%B0master"><span class="nav-number">3.3.</span> <span class="nav-text">追加密钥到 Master</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E5%AF%86%E9%92%A5%E5%88%B0%E4%BB%8E%E8%8A%82%E7%82%B9"><span class="nav-number">3.4.</span> <span class="nav-text">复制密钥到从节点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ntp%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="nav-number">4.</span> <span class="nav-text">ntp 时间同步</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3ntp%E7%BB%84%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">所有节点安装相关 ntp 组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA"><span class="nav-number">4.2.</span> <span class="nav-text">所有节点设置时区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8ntp%E4%BB%A5%E5%8F%8A%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="nav-number">4.3.</span> <span class="nav-text">启动 ntp，以及设置开机启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEntp%E6%9C%8D%E5%8A%A1%E5%99%A8master%E8%8A%82%E7%82%B9"><span class="nav-number">4.4.</span> <span class="nav-text">配置 ntp 服务器 (master 节点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEntp%E6%9C%8D%E5%8A%A1%E5%99%A8slave%E8%8A%82%E7%82%B9"><span class="nav-number">4.5.</span> <span class="nav-text">配置 ntp 服务器 (slave 节点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%90%AFntp%E6%9C%8D%E5%8A%A1"><span class="nav-number">4.6.</span> <span class="nav-text">重启 ntp 服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%8A%82%E7%82%B9%E5%AE%9A%E6%97%B6%E6%9C%8D%E5%8A%A1"><span class="nav-number">4.7.</span> <span class="nav-text">主节点定时服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E5%90%8C%E6%AD%A5master%E7%9A%84%E6%97%B6%E9%97%B4"><span class="nav-number">4.8.</span> <span class="nav-text">手动同步 master 的时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%90%8C%E6%AD%A5%E7%8A%B6%E6%80%81"><span class="nav-number">4.9.</span> <span class="nav-text">查看同步状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEcloudera-rpm%E4%BB%93%E5%BA%93"><span class="nav-number">5.</span> <span class="nav-text">配置 Cloudera rpm 仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BDrepo%E6%96%87%E4%BB%B6"><span class="nav-number">5.1.</span> <span class="nav-text">下载 repo 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8gpg-key%E5%AF%BC%E5%85%A5%E4%BB%93%E5%BA%93"><span class="nav-number">5.2.</span> <span class="nav-text">使用 GPG key 导入仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BDparcel%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.</span> <span class="nav-text">下载 parcel 文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-java64-bit"><span class="nav-number">6.</span> <span class="nav-text">安装 Java（64-bit）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E6%8E%89%E8%87%AA%E5%B8%A6%E7%9A%84-openjdk"><span class="nav-number">6.1.</span> <span class="nav-text">卸载掉自带的 OpenJdk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8cloudera-manager-%E5%AE%89%E8%A3%85-java"><span class="nav-number">6.2.</span> <span class="nav-text">使用 Cloudera Manager 安装 Java</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">6.3.</span> <span class="nav-text">设置环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yum-update%E6%8A%A5%E9%94%99error-delta-rpms-disabled-because-usrbinapplydeltarpm-not-installed."><span class="nav-number">6.3.1.</span> <span class="nav-text">yum update 报错 Error: Delta RPMs disabled because &#x2F;usr&#x2F;bin&#x2F;applydeltarpm not installed.</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85cloudera-manager-server"><span class="nav-number">7.</span> <span class="nav-text">安装 Cloudera Manager Server</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85cloudera-manager%E5%8C%85"><span class="nav-number">7.1.</span> <span class="nav-text">安装 Cloudera Manager 包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E7%94%A8auto-tls"><span class="nav-number">7.2.</span> <span class="nav-text">启用 Auto-TLS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93mariadb-for-cloudera-softwaremaster%E8%8A%82%E7%82%B9"><span class="nav-number">8.</span> <span class="nav-text">安装和配置数据库 MariaDB for Cloudera Software (master 节点)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85mariadb"><span class="nav-number">8.1.</span> <span class="nav-text">安装 MariaDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEmariadb"><span class="nav-number">8.2.</span> <span class="nav-text">配置 MariaDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8mariadb"><span class="nav-number">8.3.</span> <span class="nav-text">启动 MariaDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8mariadb"><span class="nav-number">8.3.1.</span> <span class="nav-text">开机启动 MariaDB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8mariadb%E6%9C%8D%E5%8A%A1"><span class="nav-number">8.3.2.</span> <span class="nav-text">启动 MariaDB 服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE"><span class="nav-number">8.4.</span> <span class="nav-text">安全设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85mysql-jdbc-driver-for-mariadb"><span class="nav-number">8.5.</span> <span class="nav-text">安装 MySQL JDBC Driver for MariaDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="nav-number">8.5.1.</span> <span class="nav-text">下载驱动包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="nav-number">8.5.2.</span> <span class="nav-text">解压驱动包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="nav-number">8.5.3.</span> <span class="nav-text">复制驱动包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">8.6.</span> <span class="nav-text">创建数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95root%E8%B4%A6%E6%88%B7"><span class="nav-number">8.6.1.</span> <span class="nav-text">登录 root 账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAhive%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">8.6.2.</span> <span class="nav-text">创建 hive 数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7"><span class="nav-number">8.6.3.</span> <span class="nav-text">创建账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%B7%E6%96%B0%E6%9D%83%E9%99%90"><span class="nav-number">8.6.4.</span> <span class="nav-text">刷新权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">8.6.5.</span> <span class="nav-text">查看数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90"><span class="nav-number">8.6.6.</span> <span class="nav-text">查看权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEcloudera-manager%E6%95%B0%E6%8D%AE%E5%BA%93master%E8%8A%82%E7%82%B9"><span class="nav-number">9.</span> <span class="nav-text">设置 Cloudera Manager 数据库 (master 节点)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E6%B3%95"><span class="nav-number">9.1.</span> <span class="nav-text">设置语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.2.</span> <span class="nav-text">准备数据库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85cdh%E5%8F%8A%E5%85%B6%E4%BB%96%E8%BD%AF%E4%BB%B6"><span class="nav-number">10.</span> <span class="nav-text">安装 CDH 及其他软件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8cloudera-manager-servermaster%E8%8A%82%E7%82%B9"><span class="nav-number">10.1.</span> <span class="nav-text">启动 Cloudera Manager Server (master 节点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97master%E8%8A%82%E7%82%B9"><span class="nav-number">10.2.</span> <span class="nav-text">查看日志 (master 节点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95web%E9%A1%B5%E9%9D%A2"><span class="nav-number">10.3.</span> <span class="nav-text">登录 web 页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%BB%84%E4%BB%B6"><span class="nav-number">10.4.</span> <span class="nav-text">安装组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#x-%E6%8E%A5%E5%8F%97%E6%9C%80%E7%BB%88%E7%94%A8%E6%88%B7%E8%AE%B8%E5%8F%AF%E6%9D%A1%E6%AC%BE%E5%92%8C%E6%9D%A1%E4%BB%B6"><span class="nav-number">10.4.1.</span> <span class="nav-text">- [x] 接受最终用户许可条款和条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9cloudera-express%E5%85%8D%E8%B4%B9%E7%89%88"><span class="nav-number">10.4.2.</span> <span class="nav-text">选择 Cloudera Express 免费版</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85"><span class="nav-number">10.4.3.</span> <span class="nav-text">集群安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cluster-basics"><span class="nav-number">10.4.3.1.</span> <span class="nav-text">Cluster Basics</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#specify-hosts"><span class="nav-number">10.4.3.2.</span> <span class="nav-text">Specify Hosts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E5%AD%98%E5%82%A8%E5%BA%93"><span class="nav-number">10.4.3.3.</span> <span class="nav-text">选择存储库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#jdk-%E5%AE%89%E8%A3%85%E9%80%89%E9%A1%B9"><span class="nav-number">10.4.3.4.</span> <span class="nav-text">JDK 安装选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E5%87%AD%E6%8D%AE"><span class="nav-number">10.4.3.5.</span> <span class="nav-text">设置登录凭据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85agents"><span class="nav-number">10.4.3.6.</span> <span class="nav-text">安装 agents</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85parcels"><span class="nav-number">10.4.3.7.</span> <span class="nav-text">安装 Parcels</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inspect-hosts"><span class="nav-number">10.4.3.8.</span> <span class="nav-text">Inspect Hosts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="nav-number">10.4.3.9.</span> <span class="nav-text">组件列表</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%90%91%E5%AF%BC%E8%AE%BE%E7%BD%AE%E7%BE%A4%E9%9B%86"><span class="nav-number">11.</span> <span class="nav-text">使用向导设置群集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%9C%8D%E5%8A%A1"><span class="nav-number">11.1.</span> <span class="nav-text">选择服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D"><span class="nav-number">11.2.</span> <span class="nav-text">自定义角色分配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE"><span class="nav-number">11.3.</span> <span class="nav-text">数据库设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hive"><span class="nav-number">11.3.1.</span> <span class="nav-text">Hive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#oozie"><span class="nav-number">11.3.2.</span> <span class="nav-text">Oozie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hue"><span class="nav-number">11.3.3.</span> <span class="nav-text">Hue</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%A1%E6%A0%B8%E6%9B%B4%E6%94%B9"><span class="nav-number">11.4.</span> <span class="nav-text">审核更改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="nav-number">11.5.</span> <span class="nav-text">命令详细信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B1%87%E6%80%BB"><span class="nav-number">11.6.</span> <span class="nav-text">汇总</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E6%8E%92%E6%9F%A5"><span class="nav-number">12.</span> <span class="nav-text">错误排查</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="XIE QING"
      src="/images/logo.png">
  <p class="site-author-name" itemprop="name">XIE QING</p>
  <div class="site-description" itemprop="description">怜我世人, 焚我残躯。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/xieqing0428" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xieqing0428" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/xieqing001" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;xieqing001" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douban.com/people/xieqing0428" title="Douban → https:&#x2F;&#x2F;www.douban.com&#x2F;people&#x2F;xieqing0428" rel="noopener" target="_blank"><i class="fab fa-imdb fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:xieqing0428@gmail.com" title="E-Mail → mailto:xieqing0428@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://alessa0.cn/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/e8de8c76ba4e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.png">
      <meta itemprop="name" content="XIE QING">
      <meta itemprop="description" content="怜我世人, 焚我残躯。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="听泉.ღ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          傻瓜式 CDH 集群部署指南
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-17 14:40:59" itemprop="dateCreated datePublished" datetime="2019-05-17T14:40:59+08:00">2019-05-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-18 08:42:38" itemprop="dateModified" datetime="2021-06-18T08:42:38+08:00">2021-06-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p class="description">
CDH 环境配置
</p>
<p><img data-src="https://image.alessa0.cn/074403.jpg" alt="clay-banks-1554989-unsplash"><span id="more"></span></p>
<blockquote class="blockquote-center">
<p>单机内存最低 8G</p>

</blockquote>
<div class="text-center">
<a class="btn" target="_blank" rel="noopener" href="https://www.cloudera.com/"><i class="fa fa-home fa-lg fa-fw"></i>Cloudera</a>
</div>
<h1 id="集群环境">集群环境</h1>
<h2 id="系统">系统</h2>
<p>CentOS-7-x86_64-Minimal-1810.iso</p>
<ul>
<li><strong>cdh-master</strong> 192.168.69.111 <strong>4core</strong> <strong>16G</strong></li>
<li><strong>cdh-slave1</strong> 192.168.69.112 <strong>4core</strong> <strong>8G</strong></li>
<li><strong>cdh-slave2</strong> 192.168.69.113 <strong>4core</strong> <strong>8G</strong></li>
</ul>
<h1 id="关闭防火墙及修改hosts">关闭防火墙及修改 hosts</h1>
<h2 id="永久关闭内核防火墙">永久关闭内核防火墙</h2>
<ul>
<li>vim /etc/selinux/config</li>
</ul>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改如下信息</span></span><br><span class="line"><span class="attr">SELINUX</span>=disabled</span><br></pre></td></tr></tbody></table></figure>
<h2 id="关闭系统防火墙">关闭系统防火墙</h2>
<h3 id="停止firewall">停止 firewall</h3>
<ul>
<li>systemctl stop firewalld.service</li>
</ul>
<h3 id="禁止firewall开机启动">禁止 firewall 开机启动</h3>
<ul>
<li>systemctl disable firewalld.service</li>
</ul>
<h2 id="修改hosts文件">修改 hosts 文件</h2>
<ul>
<li>vim /etc/hosts</li>
</ul>
<figure class="highlight accesslog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"><span class="number">192.168.69.111</span> cdh-master </span><br><span class="line"><span class="number">192.168.69.112</span> cdh-slave1 </span><br><span class="line"><span class="number">192.168.69.113</span> cdh-slave2 </span><br></pre></td></tr></tbody></table></figure>
<h1 id="ssh互信">SSH 互信</h1>
<h2 id="生成密钥对公钥和私钥">生成密钥对（公钥和私钥）</h2>
<ul>
<li>ssh-keygen -t rsa -P ''</li>
</ul>
<h2 id="追加authorized_keys">追加 authorized_keys</h2>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 追加authorized_keys</span></span><br><span class="line">cat ~<span class="regexp">/.ssh/i</span>d_rsa.pub &gt; ~<span class="regexp">/.ssh/</span>authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改权限</span></span><br><span class="line">chmod g-w ~</span><br><span class="line">chmod <span class="number">700</span> ~/.ssh </span><br><span class="line">chmod <span class="number">600</span> ~<span class="regexp">/.ssh/</span>authorized_keys</span><br></pre></td></tr></tbody></table></figure>
<h2 id="追加密钥到master">追加密钥到 Master</h2>
<ul>
<li>ssh cdh-slave1 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</li>
<li>ssh cdh-slave2 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</li>
</ul>
<h2 id="复制密钥到从节点">复制密钥到从节点</h2>
<ul>
<li>scp ~/.ssh/authorized_keys cdh-slave1:~/.ssh/authorized_keys</li>
<li>scp ~/.ssh/authorized_keys cdh-slave2:~/.ssh/authorized_keys</li>
</ul>
<h1 id="ntp时间同步">ntp 时间同步</h1>
<h2 id="所有节点安装相关ntp组件">所有节点安装相关 ntp 组件</h2>
<ul>
<li>yum -y install ntp</li>
</ul>
<h2 id="所有节点设置时区">所有节点设置时区</h2>
<ul>
<li>timedatectl set-timezone Asia/Shanghai</li>
</ul>
<h2 id="启动ntp以及设置开机启动">启动 ntp，以及设置开机启动</h2>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动ntp</span></span><br><span class="line">systemctl start ntpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机启动</span></span><br><span class="line">systemctl <span class="builtin-name">enable</span> ntpd</span><br></pre></td></tr></tbody></table></figure>
<h2 id="配置ntp服务器master节点">配置 ntp 服务器 (master 节点)</h2>
<ul>
<li>vim /etc/ntp.conf</li>
</ul>
<figure class="highlight vala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 修改如下几行</span></span><br><span class="line"><span class="meta">#server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 3.centos.pool.ntp.org iburst</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 添加如下几行</span></span><br><span class="line">restrict&nbsp;<span class="number">192.168</span><span class="number">.69</span><span class="number">.2</span>&nbsp;mask&nbsp;<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>&nbsp;nomodify notrap</span><br><span class="line">server <span class="number">127.127</span><span class="number">.1</span><span class="number">.0</span></span><br><span class="line">fudge <span class="number">127.127</span><span class="number">.1</span><span class="number">.0</span> stratum <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="配置ntp服务器slave节点">配置 ntp 服务器 (slave 节点)</h2>
<ul>
<li>vim /etc/ntp.conf</li>
</ul>
<figure class="highlight vala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 修改如下几行</span></span><br><span class="line"><span class="meta">#server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#server 3.centos.pool.ntp.org iburst</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 添加如下几行(master节点)</span></span><br><span class="line">restrict&nbsp;<span class="number">192.168</span><span class="number">.69</span><span class="number">.2</span>&nbsp;mask&nbsp;<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>&nbsp;nomodify notrap</span><br><span class="line">server <span class="number">192.168</span><span class="number">.69</span><span class="number">.111</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="重启ntp服务">重启 ntp 服务</h2>
<ul>
<li>systemctl restart ntpd</li>
</ul>
<h2 id="主节点定时服务">主节点定时服务</h2>
<ul>
<li>crontab -e</li>
</ul>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>-<span class="number">59</span><span class="regexp">/10 * * * * /u</span>sr<span class="regexp">/sbin/</span>ntpdate -u asia.pool.ntp.org</span><br></pre></td></tr></tbody></table></figure>
<h2 id="手动同步master的时间">手动同步 master 的时间</h2>
<ul>
<li>ntpdate -u 192.168.69.111</li>
</ul>
<h2 id="查看同步状态">查看同步状态</h2>
<ul>
<li>ntpstat</li>
</ul>
<h1 id="配置cloudera-rpm仓库">配置 Cloudera rpm 仓库</h1>
<h2 id="下载repo文件">下载 repo 文件</h2>
<ul>
<li>sudo wget https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/cloudera-manager.repo -P /etc/yum.repos.d/</li>
</ul>
<h2 id="使用gpg-key导入仓库">使用 GPG key 导入仓库</h2>
<ul>
<li>sudo rpm --import https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/RPM-GPG-KEY-cloudera</li>
</ul>
<h2 id="下载parcel文件">下载 parcel 文件</h2>
<ul>
<li>mkdir -p /opt/cloudera/parcel-repo/</li>
<li>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel /opt/cloudera/parcel-repo/</li>
<li>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel.sha256 /opt/cloudera/parcel-repo/</li>
<li>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/manifest.json /opt/cloudera/parcel-repo/</li>
</ul>
<h1 id="安装-java64-bit">安装 Java（64-bit）</h1>
<h2 id="卸载掉自带的-openjdk">卸载掉自带的 OpenJdk</h2>
<ul>
<li>rpm -qa | grep java</li>
</ul>
<h2 id="使用cloudera-manager-安装-java">使用 Cloudera Manager 安装 Java</h2>
<ul>
<li>sudo yum -y install oracle-j2sdk1.8</li>
</ul>
<h2 id="设置环境变量">设置环境变量</h2>
<ul>
<li>vim /etc/profile</li>
</ul>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET JAVA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/java/jdk1.8.0_181-cloudera/</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$CLASSPATH:$JAVA_HOME/lib </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$JAVA_HOME/bin</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>source /etc/profile</li>
</ul>
<h3 id="yum-update报错error-delta-rpms-disabled-because-usrbinapplydeltarpm-not-installed.">yum update 报错 <code>Error: Delta RPMs disabled because /usr/bin/applydeltarpm not installed.</code></h3>
<figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装deltarpm</span></span><br><span class="line"><span class="attribute">yum</span> provides <span class="string">'*/applydeltarpm'</span></span><br><span class="line">yum install deltarpm</span><br></pre></td></tr></tbody></table></figure>
<h1 id="安装cloudera-manager-server">安装 Cloudera Manager Server</h1>
<h2 id="安装cloudera-manager包">安装 Cloudera Manager 包</h2>
<ul>
<li>sudo yum -y install cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server</li>
</ul>
<p>Ps：可以在 https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/RPMS/x86_64/ 提前下好 rpm 包进行安装。</p>
<h2 id="启用auto-tls">启用 Auto-TLS</h2>
<p>待续</p>
<h1 id="安装和配置数据库mariadb-for-cloudera-softwaremaster节点">安装和配置数据库 MariaDB for Cloudera Software (master 节点)</h1>
<h2 id="安装mariadb">安装 MariaDB</h2>
<ul>
<li>sudo yum -y install mariadb-server</li>
</ul>
<h2 id="配置mariadb">配置 MariaDB</h2>
<ul>
<li>vim /etc/my.cnf</li>
</ul>
<figure class="highlight nix"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"><span class="attr">datadir=/var/lib/mysql</span></span><br><span class="line"><span class="attr">socket=/var/lib/mysql/mysql.sock</span></span><br><span class="line"><span class="attr">transaction-isolation</span> = READ-COMMITTED</span><br><span class="line"><span class="comment"># Disabling symbolic-links is recommended to prevent assorted security risks;</span></span><br><span class="line"><span class="comment"># to do so, uncomment this line:</span></span><br><span class="line"><span class="attr">symbolic-links</span> = <span class="number">0</span></span><br><span class="line"><span class="comment"># Settings user and group are ignored when systemd is used.</span></span><br><span class="line"><span class="comment"># If you need to run mysqld under a different user or group,</span></span><br><span class="line"><span class="comment"># customize your systemd unit file for mariadb according to the</span></span><br><span class="line"><span class="comment"># instructions in http://fedoraproject.org/wiki/Systemd</span></span><br><span class="line"></span><br><span class="line"><span class="attr">key_buffer</span> = <span class="number">16</span>M</span><br><span class="line"><span class="attr">key_buffer_size</span> = <span class="number">32</span>M</span><br><span class="line"><span class="attr">max_allowed_packet</span> = <span class="number">32</span>M</span><br><span class="line"><span class="attr">thread_stack</span> = <span class="number">256</span>K</span><br><span class="line"><span class="attr">thread_cache_size</span> = <span class="number">64</span></span><br><span class="line"><span class="attr">query_cache_limit</span> = <span class="number">8</span>M</span><br><span class="line"><span class="attr">query_cache_size</span> = <span class="number">64</span>M</span><br><span class="line"><span class="attr">query_cache_type</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max_connections</span> = <span class="number">550</span></span><br><span class="line"><span class="comment">#expire_logs_days = 10</span></span><br><span class="line"><span class="comment">#max_binlog_size = 100M</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#log_bin should be on a disk with enough free space.</span></span><br><span class="line"><span class="comment">#Replace '/var/lib/mysql/mysql_binary_log' with an appropriate path for your</span></span><br><span class="line"><span class="comment">#system and chown the specified folder to the mysql user.</span></span><br><span class="line"><span class="attr">log_bin=/var/lib/mysql/mysql_binary_log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#In later versions of MariaDB, if you enable the binary log and do not set</span></span><br><span class="line"><span class="comment">#a server_id, MariaDB will not start. The server_id must be unique within</span></span><br><span class="line"><span class="comment">#the replicating group.</span></span><br><span class="line"><span class="attr">server_id=1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">binlog_format</span> = mixed</span><br><span class="line"></span><br><span class="line"><span class="attr">read_buffer_size</span> = <span class="number">2</span>M</span><br><span class="line"><span class="attr">read_rnd_buffer_size</span> = <span class="number">16</span>M</span><br><span class="line"><span class="attr">sort_buffer_size</span> = <span class="number">8</span>M</span><br><span class="line"><span class="attr">join_buffer_size</span> = <span class="number">8</span>M</span><br><span class="line"></span><br><span class="line"><span class="comment"># InnoDB settings</span></span><br><span class="line"><span class="attr">innodb_file_per_table</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">innodb_flush_log_at_trx_commit</span>  = <span class="number">2</span></span><br><span class="line"><span class="attr">innodb_log_buffer_size</span> = <span class="number">64</span>M</span><br><span class="line"><span class="attr">innodb_buffer_pool_size</span> = <span class="number">4</span>G</span><br><span class="line"><span class="attr">innodb_thread_concurrency</span> = <span class="number">8</span></span><br><span class="line"><span class="attr">innodb_flush_method</span> = O_DIRECT</span><br><span class="line"><span class="attr">innodb_log_file_size</span> = <span class="number">512</span>M</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line"><span class="attr">log-error=/var/log/mariadb/mariadb.log</span></span><br><span class="line"><span class="attr">pid-file=/var/run/mariadb/mariadb.pid</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># include all files from the config directory</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">!includedir /etc/my.cnf.d</span><br></pre></td></tr></tbody></table></figure>
<h2 id="启动mariadb">启动 MariaDB</h2>
<h3 id="开机启动mariadb">开机启动 MariaDB</h3>
<ul>
<li>sudo systemctl enable mariadb</li>
</ul>
<h3 id="启动mariadb服务">启动 MariaDB 服务</h3>
<ul>
<li>sudo systemctl start mariadb</li>
</ul>
<h2 id="安全设置">安全设置</h2>
<ul>
<li>sudo /usr/bin/mysql_secure_installation</li>
</ul>
<figure class="highlight tp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line">[...]</span><br><span class="line">Set root password? [<span class="keyword">Y</span>/n] <span class="keyword">Y</span></span><br><span class="line">New password: <span class="number">123</span></span><br><span class="line">Re-enter new password: <span class="number">123</span></span><br><span class="line">[...]</span><br><span class="line">Remove anonymous users? [<span class="keyword">Y</span>/n] <span class="keyword">Y</span></span><br><span class="line">[...]</span><br><span class="line">Disallow root login remotely? [<span class="keyword">Y</span>/n] <span class="keyword">Y</span></span><br><span class="line">[...]</span><br><span class="line">Remove test database and access to it [<span class="keyword">Y</span>/n] <span class="keyword">Y</span></span><br><span class="line">[...]</span><br><span class="line">Reload privilege tables now? [<span class="keyword">Y</span>/n] <span class="keyword">Y</span></span><br><span class="line">[...]</span><br><span class="line">All done<span class="comment">!  If you've completed all of the above steps, your MariaDB</span></span><br><span class="line"><span class="comment">installation should now be secure.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Thanks for using MariaDB!</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="安装mysql-jdbc-driver-for-mariadb">安装 MySQL JDBC Driver for MariaDB</h2>
<h3 id="下载驱动包">下载驱动包</h3>
<ul>
<li>wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz</li>
</ul>
<h3 id="解压驱动包">解压驱动包</h3>
<ul>
<li>tar zxvf mysql-connector-java-5.1.46.tar.gz</li>
<li>rm -rf mysql-connector-java-5.1.46.tar.gz</li>
</ul>
<h3 id="复制驱动包">复制驱动包</h3>
<ul>
<li>sudo mkdir -p /usr/share/java/</li>
<li>cd mysql-connector-java-5.1.46</li>
<li>sudo cp mysql-connector-java-5.1.46-bin.jar /usr/share/java/mysql-connector-java.jar</li>
</ul>
<h2 id="创建数据库">创建数据库</h2>
<h3 id="登录root账户">登录 root 账户</h3>
<ul>
<li>mysql -uroot -p</li>
</ul>
<h3 id="创建hive数据库">创建 hive 数据库</h3>
<ul>
<li>CREATE DATABASE metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</li>
<li>CREATE DATABASE scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</li>
<li>CREATE DATABASE oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</li>
<li>CREATE DATABASE hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</li>
</ul>
<h3 id="创建账户">创建账户</h3>
<ul>
<li>GRANT ALL ON metastore.* TO 'hive'@'%' IDENTIFIED BY '123';</li>
<li>GRANT ALL ON scm.* TO 'scm'@'%' IDENTIFIED BY '123';</li>
<li>GRANT ALL ON oozie.* TO 'oozie'@'%' IDENTIFIED BY '123';</li>
<li>GRANT ALL ON hue.* TO 'hue'@'%' IDENTIFIED BY '123';</li>
</ul>
<h3 id="刷新权限">刷新权限</h3>
<ul>
<li>flush privileges;</li>
</ul>
<h3 id="查看数据库">查看数据库</h3>
<ul>
<li>SHOW DATABASES;</li>
</ul>
<h3 id="查看权限">查看权限</h3>
<ul>
<li>SHOW GRANTS FOR 'hive'@'%';</li>
</ul>
<h1 id="设置cloudera-manager数据库master节点">设置 Cloudera Manager 数据库 (master 节点)</h1>
<h2 id="设置语法">设置语法</h2>
<ul>
<li>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm 123</li>
</ul>
<h2 id="准备数据库">准备数据库</h2>
<ul>
<li>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm</li>
</ul>
<h1 id="安装cdh及其他软件">安装 CDH 及其他软件</h1>
<p>## 【强烈建议】所有节点拍摄快照</p>
<h2 id="启动cloudera-manager-servermaster节点">启动 Cloudera Manager Server (master 节点)</h2>
<ul>
<li>sudo systemctl start cloudera-scm-server</li>
</ul>
<h2 id="查看日志master节点">查看日志 (master 节点)</h2>
<ul>
<li>sudo tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</li>
</ul>
<p>直至出现 <code>INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.</code></p>
<h2 id="登录web页面">登录 web 页面</h2>
<ul>
<li>http://cdh-master:7180</li>
</ul>
<p>账户：admin 密码：admin</p>
<h2 id="安装组件">安装组件</h2>
<h3 id="x-接受最终用户许可条款和条件">- [x] 接受最终用户许可条款和条件</h3>
<h3 id="选择cloudera-express免费版">选择 Cloudera Express 免费版</h3>
<h3 id="集群安装">集群安装</h3>
<h4 id="cluster-basics">Cluster Basics</h4>
<ul>
<li>CDH</li>
</ul>
<h4 id="specify-hosts">Specify Hosts</h4>
<ul>
<li>输入 <code>cdh-master, cdh-slave1, cdh-slave2</code> 点击 ' 搜索'</li>
</ul>
<h4 id="选择存储库">选择存储库</h4>
<ul>
<li>选择 <code>Public Cloudera Repository</code></li>
<li>选择 <code>Parcels</code></li>
<li>其他默认</li>
</ul>
<h4 id="jdk-安装选项">JDK 安装选项</h4>
<ul>
<li>选中<code>安装 Oracle Java SE 开发工具包 (JDK)</code></li>
</ul>
<h4 id="设置登录凭据">设置登录凭据</h4>
<ul>
<li>选择 <code>root</code></li>
<li>输入密码</li>
</ul>
<h4 id="安装agents">安装 agents</h4>
<h4 id="安装parcels">安装 Parcels</h4>
<h4 id="inspect-hosts">Inspect Hosts</h4>
<ul>
<li><p>虚拟内存设置</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl -<span class="keyword">w</span> <span class="keyword">vm</span>.swappiness=<span class="number">10</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">vm</span>.swappiness = <span class="number">10</span> &gt;&gt; /etc/sysctl.<span class="keyword">conf</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>大内存页设置</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 临时</span></span><br><span class="line">echo never&gt;<span class="regexp">/sys/</span>kernel<span class="regexp">/mm/</span>transparent_hugepage/defrag</span><br><span class="line">echo never&gt;<span class="regexp">/sys/</span>kernel<span class="regexp">/mm/</span>transparent_hugepage/enabled</span><br><span class="line"></span><br><span class="line"><span class="comment"># 永久</span></span><br><span class="line">vim <span class="regexp">/etc/</span>rc.local</span><br><span class="line"><span class="comment"># 加入如下信息</span></span><br><span class="line">echo never&gt;<span class="regexp">/sys/</span>kernel<span class="regexp">/mm/</span>transparent_hugepage/defrag</span><br><span class="line">echo never&gt;<span class="regexp">/sys/</span>kernel<span class="regexp">/mm/</span>transparent_hugepage/enabled</span><br><span class="line"><span class="comment"># 设置权限</span></span><br><span class="line">chmod +x <span class="regexp">/etc/</span>rc.d/rc.local</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h4 id="组件列表">组件列表</h4>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">组件</th>
<th style="text-align: left;">版本</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"> Supervisord</td>
<td style="text-align: left;">3.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cloudera Manager Agent</td>
<td style="text-align: left;">6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cloudera Manager Management Daemon</td>
<td style="text-align: left;">6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Flume NG</td>
<td style="text-align: left;">1.9.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hadoop</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">HDFS</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HttpFS</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">hadoop-kms</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MapReduce 2</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">YARN</td>
<td style="text-align: left;">3.0.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HBase</td>
<td style="text-align: left;">2.1.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lily HBase Indexer</td>
<td style="text-align: left;">1.5+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hive</td>
<td style="text-align: left;">2.1.1+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">HCatalog</td>
<td style="text-align: left;">2.1.1+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hue</td>
<td style="text-align: left;">4.2.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Impala</td>
<td style="text-align: left;">3.2.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Java 8</td>
<td style="text-align: left;">1.8.0_181</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kafka</td>
<td style="text-align: left;">2.1.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kite（仅限 CDH 5 ）</td>
<td style="text-align: left;">1.0.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">kudu</td>
<td style="text-align: left;">1.9.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oozie</td>
<td style="text-align: left;">5.1.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Parquet</td>
<td style="text-align: left;">1.9.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pig</td>
<td style="text-align: left;">0.17.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">sentry</td>
<td style="text-align: left;">2.1.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Solr</td>
<td style="text-align: left;">7.4.0+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">spark</td>
<td style="text-align: left;">2.4.0+cdh6.2.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sqoop</td>
<td style="text-align: left;">1.4.7+cdh6.2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">ZooKeeper</td>
<td style="text-align: left;">3.4.5+cdh6.2.0</td>
</tr>
</tbody>
</table>
<h1 id="使用向导设置群集">使用向导设置群集</h1>
<h2 id="选择服务">选择服务</h2>
<ul>
<li>选择<code>所有服务</code></li>
<li><del>选择 <code>HBase</code> <code>HDFS</code> <code>Hive</code> <code>Hue</code> <code>Kafka</code> <code>Oozie</code> <code>YARN(MR2 Included)</code> <code>ZooKeeper</code></del></li>
</ul>
<h2 id="自定义角色分配">自定义角色分配</h2>
<ul>
<li>默认</li>
</ul>
<h2 id="数据库设置">数据库设置</h2>
<h3 id="hive">Hive</h3>
<ul>
<li>MySQL &gt; 否 &gt; cdh-master &gt; metastore &gt; hive &gt; 123</li>
</ul>
<h3 id="oozie">Oozie</h3>
<ul>
<li>MySQL &gt; cdh-master &gt; oozie &gt; oozie &gt; 123</li>
</ul>
<h3 id="hue">Hue</h3>
<ul>
<li>MySQL &gt; cdh-master &gt; hue &gt; hue &gt; 123</li>
</ul>
<h2 id="审核更改">审核更改</h2>
<ul>
<li>默认</li>
</ul>
<h2 id="命令详细信息">命令详细信息</h2>
<p>Ps：若搭建过程中多次尝试安装，建议删除 /dfs/nn 下文件，避免 HDFS 服务报错</p>
<h2 id="汇总">汇总</h2>
<h1 id="错误排查">错误排查</h1>
<p>推荐链接 &gt;&gt; https://blog.csdn.net/zzq900503/article/details/53393721</p>
<p><br></p>
<p><meting-js id="31654478" server="netease" type="song" preload="none"></meting-js></p>
<hr>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>XIE QING
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://alessa0.cn/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/e8de8c76ba4e/" title="傻瓜式 CDH 集群部署指南">https://alessa0.cn/技术/大数据/CDH/e8de8c76ba4e/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/BigData/" rel="tag"><i class="fa fa-tag"></i> BigData</a>
              <a href="/tags/CDH%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag"><i class="fa fa-tag"></i> CDH环境搭建</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Flink/4706bca13060/" rel="prev" title="Hadoop 集群搭建 (十五)：Flink">
                  <i class="fa fa-chevron-left"></i> Hadoop 集群搭建 (十五)：Flink
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/Flink%E7%94%B5%E5%95%86%E5%9B%A2%E8%B4%AD/01-%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/59559452b8a4/" rel="next" title="Flink 电商团购项目（零）：环境搭建">
                  Flink 电商团购项目（零）：环境搭建 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">闽ICP备18014770号-1 </a>
      <img src="/images/gongan.png" alt="">
  </div>

<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XIE QING</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">117k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:46</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b8aaa8388d1df01" async="async"></script>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
  <script src="https://embed.widgetpack.com/widget.js" async></script>
  <script class="next-config" data-name="rating" type="application/json">{&quot;enable&quot;:true,&quot;id&quot;:13631,&quot;color&quot;:&quot;#fc6423&quot;}</script>
  <script src="/js/third-party/rating.js"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script class="next-config" data-name="chatra" type="application/json">{&quot;enable&quot;:true,&quot;async&quot;:true,&quot;id&quot;:&quot;ziEfeGJkwovPFGxWg&quot;}</script>
<script src="/js/third-party/chat/chatra.js"></script>
<script async src="https://call.chatra.io/chatra.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{&quot;object_url&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;pdfobject@2.2.5&#x2F;pdfobject.min.js&quot;,&quot;integrity&quot;:&quot;sha256-YuNlP9i6s&#x2F;WH7EaU2kErloo9Vc85C3WVqhoMDgsEVpY&#x3D;&quot;},&quot;url&quot;:&quot;&#x2F;lib&#x2F;pdf&#x2F;web&#x2F;viewer&quot;}</script>
  <script src="/js/third-party/tags/pdf.js"></script>


  <script class="next-config" data-name="nprogress" type="application/json">{&quot;enable&quot;:true,&quot;spinner&quot;:true}</script>
  <script src="/js/third-party/nprogress.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{&quot;enable&quot;:true,&quot;tags&quot;:&quot;none&quot;,&quot;js&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;mathjax@3.1.4&#x2F;es5&#x2F;tex-mml-chtml.js&quot;,&quot;integrity&quot;:&quot;sha256-ncNI9OXOS5Ek4tzVYiOMmN&#x2F;KKCPZ6V0Cpv2P&#x2F;zHntiA&#x3D;&quot;}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{&quot;enable&quot;:true,&quot;github_id&quot;:&quot;xieqing0428&quot;,&quot;repo&quot;:&quot;gitalk&quot;,&quot;client_id&quot;:&quot;ebff00f2118b2ecb19a1&quot;,&quot;client_secret&quot;:&quot;8ec8654b13829e1c459512086f65a6a31e67476e&quot;,&quot;admin_user&quot;:&quot;xieqing0428&quot;,&quot;distraction_free_mode&quot;:true,&quot;proxy&quot;:&quot;https:&#x2F;&#x2F;cors-anywhere.azm.workers.dev&#x2F;https:&#x2F;&#x2F;github.com&#x2F;login&#x2F;oauth&#x2F;access_token&quot;,&quot;language&quot;:&quot;zh-CN&quot;,&quot;js&quot;:{&quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;gitalk@1.7.2&#x2F;dist&#x2F;gitalk.min.js&quot;,&quot;integrity&quot;:&quot;sha256-Pmj85ojLaPOWwRtlMJwmezB&#x2F;Qg8BzvJp5eTzvXaYAfA&#x3D;&quot;},&quot;path_md5&quot;:&quot;851354e44f7c8aa19bf9008d54a49556&quot;}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
